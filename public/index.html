<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã I –û—Ç–∫—Ä—ã—Ç–æ–≥–æ –∫–æ–Ω–∫—É—Ä—Å–∞ –ø–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –≤ —Å—Ä–µ–¥–µ Minecraft</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!-- <link href="style.css" rel="stylesheet"> -->
</head>
<body>
    <div class="container-xl mt-5">
        <h1 class="mb-2">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã I –û—Ç–∫—Ä—ã—Ç–æ–≥–æ –∫–æ–Ω–∫—É—Ä—Å–∞ –ø–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –≤ —Å—Ä–µ–¥–µ Minecraft</h1>
        <h2 class="mb-5">–ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–ª–æ—â–∞–¥–∏ –í–æ—Å—Å—Ç–∞–≤—à–∏—Ö</h2>
        <div id="list-element-tempalate" style="display: none;">
            <li class="list-group-item d-flex justify-content-between align-items-start">
                <div class="ms-2 me-auto">
                    <span class="fs-1">%place_emoji%</span>
                    <span>%title%</span>
                    <p>–ê–≤—Ç–æ—Ä—ã:%authors%</p>
                </div>
                <div>
                    <div>
                        <span>–°–∫–∞—á–∞—Ç—å –º–æ–¥–µ–ª—å:</span>
                        <a href="%schem_url%" class="btn btn-outline-primary">
                            <span>Schematic .schem</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-arrow-down" viewBox="0 0 16 16">
                                <path d="M8.5 6.5a.5.5 0 0 0-1 0v3.793L6.354 9.146a.5.5 0 1 0-.708.708l2 2a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0-.708-.708L8.5 10.293V6.5z"/>
                                <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>
                            </svg>
                        </a>
                        <a href="%je_world_url%" class="btn btn-outline-primary">
                            <span>Java Edition .zip</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-arrow-down" viewBox="0 0 16 16">
                                <path d="M8.5 6.5a.5.5 0 0 0-1 0v3.793L6.354 9.146a.5.5 0 1 0-.708.708l2 2a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0-.708-.708L8.5 10.293V6.5z"/>
                                <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>
                            </svg>
                        </a>
                        <a href="%be_world_url%" class="btn btn-outline-primary">
                            <span>Bedrock Edition .mcworld</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-arrow-down" viewBox="0 0 16 16">
                                <path d="M8.5 6.5a.5.5 0 0 0-1 0v3.793L6.354 9.146a.5.5 0 1 0-.708.708l2 2a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0-.708-.708L8.5 10.293V6.5z"/>
                                <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>
                            </svg>
                        </a>
                    </div>
                    <div class="text-end mt-2">
                        <a href="%url%" type="button" class="btn btn-primary">–û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–µ–ª—å ></a>
                    </div>
                </div>
            </li>
        </div>
        <div id="loading-spinner" class="text-center">
            <div class="spinner-border" style="width: 5rem; height: 5rem;" role="status">
                <span class="visually-hidden">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
            </div>
        </div>
        <ul id="models-list" class="list-group">
        </ul>
        <div class="mt-4 mb-4">
            <a href="https://github.com/MinecraftContest/result-website">–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –Ω–∞ GitHub
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
                </svg>
            </a>
        </div>
    </div>
    <script>
        async function main () {
            const emoji_mapping = {
                '1': 'ü•á',
                '2': 'ü•à',
                '3': 'ü•â'
            }

            const data = await fetch('/data/metadata.json', {cache: "no-store"}).then(r => r.json())

            data.sort((a, b) => b.points - a.points)

            const spinner = document.getElementById('loading-spinner')
            spinner.parentElement.removeChild(spinner)

            var list = document.getElementById('models-list')
            const tempalate = document.getElementById('list-element-tempalate').innerHTML
            for (const e of data) {
                var element = document.createElement('div')
                const url = new URL("/viewer.html", document.location.origin);
                url.searchParams.append("model", e.model)
                url.searchParams.append("title", e.title)
                if ('pres' in e) {
                    var items = []
                    for (const p of e.pres) {
                        items.push(p.type + ':::' + p.src)
                    }
                    url.searchParams.append('pres', items.join(';;;'))
                }

                if (e.place in emoji_mapping) {
                    place_emoji = emoji_mapping[e.place]
                } else {
                    place_emoji = ""
                }

                title = e.title + " - " + e.points + " –±–∞–ª–ª–æ–≤"

                authors = ""
                for (const author of e.authors) {
                    authors += "<br/>" + author
                }

                element.innerHTML = tempalate
                    .replace("%place_emoji%", place_emoji)
                    .replace("%title%", title)
                    .replace("%authors%", authors)
                    .replace("%schem_url%", "/data/models/" + e.schem_file)
                    .replace("%je_world_url%", "/data/worlds/" + e.je_world_file)
                    .replace("%be_world_url%", "/data/worlds/" + e.be_world_file)
                    .replace("%url%", url.href)
                    .trim()
                list.appendChild(element.firstChild)
            }
        }
        main()
    </script>
</body>
</html>